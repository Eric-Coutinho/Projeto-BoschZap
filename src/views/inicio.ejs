<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoschZap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/inicio.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@500&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Geologica:wght@500&family=Lekton&family=Lexend+Peta:wght@500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/css/selectize.bootstrap3.min.css"
        integrity="sha256-ze/OEYGcFbPRmvCnrSeKbRTtjG4vGLHXgOqsyLFTRjg=" crossorigin="anonymous" />

    <style>
        .botãoSidebar {
            background-color: white;
            margin: 0;
            margin-block: 0.5em;
        }

        @media (max-width: 767px) {
            .row .digitar {
                position: fixed;
                bottom: 0;
                left: 0;
                margin-bottom: 1.5em;
                max-width: 100%;
                width: 90%;
            }
        }

        @media (min-width: 768px) {
            .digitar {
                position: fixed;
                bottom: 0;
                left: 0;
                margin-bottom: 1.5em;
                max-width: 100%;
                width: 95%;
                margin-right: 1.15em;
            }
        }

        @media (min-width: 991px) {
            .digitar {
                position: fixed;
                bottom: 0;
                left: 0;
                margin-bottom: 1.5em;
                max-width: 100%;
                width: 80%;
                margin-right: 1.15em;
            }
        }

        @media (min-width: 992px) and (max-width: 1199px) {
            .digitar {
                position: fixed;
                bottom: 0;
                left: 0;
                margin-bottom: 1.5em;
                max-width: 100%;
                width: 72%;
                margin-right: 1.15em;
            }
        }

        .cardrecomend-btn {
            display: none;
            cursor: pointer;
            background-color: white;
            border-radius: 5px;
            padding: 0.5em 1em;
            margin: 0.5em;
            font-family: 'DM Sans', sans-serif;
            color: black;
        }

        @media (max-width: 767px) {
            .recomendacao {
                margin-top: 0;
            }

            .cardrecomend-btn {
                display: block;
            }

            .cardrecomend {
                display: none;
            }
        }
    </style>
</head>

<body>
    <main>
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 col-xl-2 col-md-12 barra">
                    <div class="row">
                        <div class="sidebar scrollable-list">
                            <a href="/logout" class="logo" style="display: flex; justify-content: center;">
                                <img src="../img/BOSCH.png" alt="Logo BoschZap" style="width: auto; height: 2em;">
                            </a>
                            <div class="escondegrupo">
                                <a class="btn botãoSidebar d-lg-none" data-bs-toggle="collapse" href="#collapsegrupo"
                                    role="button" aria-expanded="false" aria-controls="collapsegrupo"
                                    style="display: flex; justify-content: center; color: white; background-color: rgb(90, 70, 136);">
                                    Grupos
                                </a>
                                <ul class="d-lg-block collapse" id="collapsegrupo" style="padding-left: 0.5em;">
                                    <% for (var i=0; i < grupos.length; i++) { %>
                                        <li class="grupo">
                                            <a href="/chat/<%= grupos[i].id_grupo %>" class="displaylink grupos">
                                                <div style="display: flex; align-items: center;">
                                                    <div class="imggrupo">
                                                        <img src="/img/<%= grupos[i].foto_grupo %>" alt="Foto do grupo">
                                                    </div>
                                                    <div class="nomezin"
                                                        style="display: flex; align-items: center; flex-grow: 1; word-break: break-word;">
                                                        <% const palavras=grupos[i].nome_grupo.split(' ');
                                          const nomeGrupo = palavras.map(palavra => palavra.slice(0, 13)).join(' '); %>
                                        <%= nomeGrupo %>
                                      </div>
                                    </div>
                                  </a>
                                </li>
                                <% } %>
                              </ul>
                              <div class="grupo d-none d-lg-block">
                                <div class="displaylink botao">
                                  <div class="botao">
                                    <button type="button" class="botao-novo-grupo" data-bs-toggle="modal"
                                      data-bs-target="#exampleModal" data-bs-whatever="@mdo">Novo Grupo</button>
                                  </div>
                                </div>
                              </div>
              
                              <div class="modal fade" id="exampleModal" tabindex="-1"
                                                              aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                              <div class="modal-dialog">
                                                                  <div class="modal-content">
                                                                      <div class="modal-header">
                                                                          <h1 class="modal-title fs-5" id="exampleModalLabel">Novo
                                                                              Grupo</h1>
                                                                          <button type="button" class="btn-close"
                                                                              data-bs-dismiss="modal" aria-label="Close"></button>
                                                                      </div>
                                                                      <div id="modal" class="modal-body">
                                                                          <form action="/criagrupo" method="post"
                                                                              enctype="multipart/form-data">
                                                                              <div class="container imagem" id="imagem"
                                                                                  style="padding: 0; width: fit-content;">
                                                                                  <img src="../img/grupo.png" alt="Foto padrão"
                                                                                      id="imgFoto">
                                                                                  <input type="file" id="flImage" name="fotogrupo"
                                                                                      accept="image/*" style="display: none;">
                                                                              </div>
                                                                              <div class="mb-3">
                                                                                  <label for="recipient-name"
                                                                                      class="col-form-label">Nome do Grupo</label>
                                                                                  <input type="text" class="form-control"
                                                                                      id="recipient-name" name="nome">
                                                                              </div>
                                                                              <div class="mb-3 final">
                                                                                  <label for="add-participante"
                                                                                      class="col-form-label">Participantes</label>
                                                                                  <select id="add-participante" name="participantes"
                                                                                      class="form-control" multiple>
                                                                                      <% for (var i=0; i < participantes.length; i++)
                                                                                          { %>
                                                                                          <% if (participantes[i].Edv !==usuarioId) {
                                                                                              %>
                                                                                              <option
                                                                                                  value="<%= participantes[i].IDUsuario %>">
                                                                                                  <%= participantes[i].Nome %>
                                                                                              </option>
                                                                                              <% } %>
                                                                                                  <% } %>
                                                                                  </select>
                                                                                  <input type="submit"
                                                                                      class="btn btn-primary botao-modal"
                                                                                      id="criar-grupo-btn" value="Criar">
                                                                              </div>
                                                                          </form>
                                                                      </div>
                                                                  </div>
                                                              </div>
                                                          </div>
              
                            </div>
                          </div>
                    <div class="row">
                        <div class="container-fluid">
                            <a href="/recomendacao" style="text-decoration: none; color: black;">
                                <div class="recomendacao">
                                    <div class="collapsegrupo" id="collapsegrupo">
                                        
                                    </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-xl-10 col-md-12 mensagens">
            </div>
        </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/inicio.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.6/js/standalone/selectize.min.js"
        integrity="sha256-+C0A5Ilqmu4QcSPxrlGpaZxJ04VjsRjKu+G82kl5UJk=" crossorigin="anonymous"></script>
    <script src="https://cdn.socket.io/4.3.1/socket.io.min.js"></script>

    <script>
        const grupos = document.querySelectorAll(' .escondegrupo li.grupo'); if (grupos.length > 10) {
            const listaGrupos = document.querySelector('.escondegrupo ul');
            listaGrupos.classList.add('scrollable-list');
        }
    </script>
      
</body>

</html>